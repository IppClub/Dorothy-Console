<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>GetCollisionList</title>
<style type="text/css">

p.p0{
margin:0pt;
margin-bottom:0.0001pt;
margin-bottom:0pt;
margin-top:0pt;
text-align:justify;
font-size:10.5000pt; font-family:'Times New Roman'; }
.style2 {
	border-width: 0px;
}
</style>
</head>

<body style="background-image: url('../../Image/Bk.PNG')">

<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
<a href="../../default.html">
<img alt="Dorothy" class="style2" height="69" src="../../Image/DorothySmall.PNG" width="200" /></a></p>
<hr />
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span style="color: rgb(0,128,0); font-size: 10.5000pt; font-family: '宋体';">
oObjectGroup类的成员函数，获得与碰撞物体相碰的被碰撞物体列表。</span></p>
<p/><p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
<span style="color: rgb(0,0,255); font-size: 10.5000pt; font-family: '宋体';">
void</span><span style="font-size: 10.5000pt; font-family: '宋体';">&nbsp;</span><span style="color: rgb(1,0,1); font-size: 10.5000pt; font-family: '宋体';">GetCollisionList</span><span style="font-size: 10.5000pt; font-family: '宋体';">(</span><span style="color: rgb(1,0,1); font-size: 10.5000pt; font-family: '宋体';">oObject</span><span style="font-size: 10.5000pt; font-family: '宋体';">*&nbsp;</span><span style="color: rgb(1,0,1); font-size: 10.5000pt; font-family: '宋体';">pkObj</span><span style="font-size: 10.5000pt; font-family: '宋体';">,</span><span style="color: rgb(1,0,1); font-size: 10.5000pt; font-family: '宋体';">vector</span><span style="font-size: 10.5000pt; font-family: '宋体';">&lt;</span><span style="color: rgb(1,0,1); font-size: 10.5000pt; font-family: '宋体';">oObject</span><span style="font-size: 10.5000pt; font-family: '宋体';">*&gt;&amp;&nbsp;</span><span style="color: rgb(1,0,1); font-size: 10.5000pt; font-family: '宋体';">kList</span><span style="font-size: 10.5000pt; font-family: '宋体';">,</span><span style="color: rgb(0,0,255); font-size: 10.5000pt; font-family: '宋体';">bool</span><span style="font-size: 10.5000pt; font-family: '宋体';">&nbsp;</span><span style="color: rgb(1,0,1); font-size: 10.5000pt; font-family: '宋体';">bCheckImage</span><span style="font-size: 10.5000pt; font-family: '宋体';">&nbsp;=&nbsp;</span><span style="color: rgb(0,0,255); font-size: 10.5000pt; font-family: '宋体';">false</span><span style="font-size: 10.5000pt; font-family: '宋体';">);</span></p>
<p/><p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
参数</span><span style="color: rgb(128,0,128); font-size: 10.5000pt; font-family: '宋体';">&nbsp;</span><span style="font-size: 10.5000pt; font-family: '宋体';">pkObj&nbsp;——指向进行碰撞的对象的指针</span></p>
<p class="p0" style="text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="font-size: 10.5000pt; font-family: '宋体';">
&nbsp;kList&nbsp;——用来存储指向被碰撞对象的指针的列表</span></p>
<p class="p0" style="text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="font-size: 10.5000pt; font-family: '宋体';">
&nbsp;bCheckImage&nbsp;——用来指明是否通过对象上的图片来判断碰撞，true通过图片，false不通过图片，默认不通过图片进行检测</span></p>
<p/><p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
——所有的oObject及派生都被当成普通矩形进行碰撞检测，如果图片是这样</span><img height="29" src="wps_clip_image-16828.png" width="33" /><img height="29" src="wps_clip_image-4692.png" width="33" /><span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">，粉色和蓝色部分表示图片是透明的，如果对象的宽高被设置为和图片一样大小，对象位置是这样的</span><img height="50" src="wps_clip_image-15651.png" width="58" /><span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">，这时如果bCheckImage=false那么就会算发生了碰撞，如果bCheckImage=true那么就不算发生碰撞，因为重叠的只是图片的透明部分</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
——kList建议使用一个固定的变量可以很大的减小资源浪费</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
我自己会这样用：</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
vector&lt;oObject*&gt;&nbsp;g_kCollisionList;//把它作为全局变量或是类的成员变量</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
……</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
//进行Cat的碰撞检测</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
g_kCollisionList.clear();//先清空列表</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
m_kGroup.GetCollisionList(pkCat,g_kCollisionList,true);//按需要也可设false</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
int&nbsp;iSize&nbsp;=&nbsp;g_kCollisionList.size();</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
//如果有碰撞，g_kCollisionList里就会有东西</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
if&nbsp;(iSize&nbsp;!=&nbsp;0)</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
{</span></p>
<p class="p0" style="text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;i&nbsp;&lt;&nbsp;iSize;i++)</span></p>
<p class="p0" style="text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
{</span></p>
<p class="p0" style="margin-left: 21.0000pt; text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
//处理被碰撞的物体</span></p>
<p class="p0" style="text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
}</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
}</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
//再进行Dog的碰撞检测</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
g_kCollisionList.clear();</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
m_kGroup.GetCollisionList(pkDog,g_kCollisionList,true);</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
iSize&nbsp;=&nbsp;g_kCollisionList.size();</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
//如果有碰撞，g_kCollisionList里就又会有东西</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
if&nbsp;(iSize&nbsp;!=&nbsp;0)</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
{</span></p>
<p class="p0" style="text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;i&nbsp;&lt;&nbsp;iSize;i++)</span></p>
<p class="p0" style="text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
{</span></p>
<p class="p0" style="margin-left: 21.0000pt; text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
//处理被碰撞的物体</span></p>
<p class="p0" style="text-indent: 21.0000pt; margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
}</span></p>
<p class="p0" style="margin-bottom: 0pt; margin-top: 0pt; text-align: left;">
<span style="color: rgb(128,128,0); font-size: 10.5000pt; font-family: '宋体';">
}</span></p>
<p/><hr />

<a href="../oObjectGroup.html">
<img alt="Dorothy" class="style2" height="73" src="../../Image/DorothySmallBlack.PNG" width="205" /></a>

</body>

</html>
